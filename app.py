from flask import Flask, url_for, request, redirect, session
import datetime
app = Flask(__name__)
app.secret_key = 'your-secret-key-here'

error_404_log = []

@app.errorhandler(404)
def not_found(err):
    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –∑–∞–ø—Ä–æ—Å–µ
    client_ip = request.remote_addr
    current_time = datetime.datetime.now()
    requested_url = request.url
    user_agent = request.headers.get('User-Agent', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π')
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥
    log_entry = {
        'timestamp': current_time,
        'ip': client_ip,
        'url': requested_url,
        'user_agent': user_agent
    }
    error_404_log.append(log_entry)
    
    # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ª–æ–≥ –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ 20 –∑–∞–ø–∏—Å—è–º–∏
    if len(error_404_log) > 20:
        error_404_log.pop(0)
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∂—É—Ä–Ω–∞–ª –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    journal_html = ""
    for entry in reversed(error_404_log[-10:]):  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
        formatted_time = entry['timestamp'].strftime("%Y-%m-%d %H:%M:%S")
        journal_html += f"""
        <div class="log-entry">
            <span class="log-time">[{formatted_time}]</span>
            <span class="log-ip">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {entry['ip']}</span>
            <span class="log-url">–∑–∞—à—ë–ª –Ω–∞ –∞–¥—Ä–µ—Å: {entry['url']}</span>
        </div>
        """
    
    return f"""<!doctype html>
<html>
<head>
    <title>404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</title>
    <style>
        body {{
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }}
        .container {{
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 900px;
            margin: 20px;
            backdrop-filter: blur(10px);
        }}
        .error-code {{
            font-size: 120px;
            font-weight: bold;
            color: #ff6b6b;
            margin: 0;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.1);
        }}
        h1 {{
            color: #2c3e50;
            margin: 10px 0 20px 0;
            font-size: 2.5em;
        }}
        p {{
            font-size: 1.2em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 30px;
        }}
        .info-section {{
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
            border-left: 5px solid #74b9ff;
        }}
        .info-section h3 {{
            color: #2d3436;
            margin-top: 0;
            border-bottom: 2px solid #74b9ff;
            padding-bottom: 10px;
        }}
        .info-item {{
            margin: 10px 0;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #ffeaa7;
        }}
        .info-label {{
            font-weight: bold;
            color: #2c3e50;
        }}
        .journal-section {{
            background: #2c3e50;
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
        }}
        .journal-section h3 {{
            color: #ffeaa7;
            margin-top: 0;
            text-align: center;
            font-size: 1.5em;
            border-bottom: 2px solid #ffeaa7;
            padding-bottom: 10px;
        }}
        .log-entry {{
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
            font-family: monospace;
            font-size: 0.9em;
            line-height: 1.4;
        }}
        .log-time {{
            color: #74b9ff;
        }}
        .log-ip {{
            color: #ffeaa7;
            margin: 0 10px;
        }}
        .log-url {{
            color: #a29bfe;
        }}
        .emoji {{
            font-size: 80px;
            margin: 20px 0;
            animation: bounce 2s infinite;
        }}
        @keyframes bounce {{
            0%, 20%, 50%, 80%, 100% {{transform: translateY(0);}}
            40% {{transform: translateY(-20px);}}
            60% {{transform: translateY(-10px);}}
        }}
        .home-button {{
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            margin: 10px;
        }}
        .home-button:hover {{
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
            background: linear-gradient(45deg, #ee5a52, #ff6b6b);
        }}
        .search-icon {{
            width: 100px;
            height: 100px;
            margin: 20px auto;
            background: #ffeaa7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #ff6b6b;
            box-shadow: 0 5px 15px rgba(255, 234, 167, 0.5);
        }}
        .advice {{
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #74b9ff;
        }}
        .advice h3 {{
            color: #2d3436;
            margin-top: 0;
        }}
        .image-container {{
            margin: 40px 0;
        }}
        .image-container img {{
            width: 450px;
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border: 5px solid #fff;
        }}
    </style>
</head>
<body>
    <div class="container">
        <div class="error-code">404</div>
        <div class="emoji">üîç</div>
        <h1>–û–π! –ö–∞–∂–µ—Ç—Å—è, –º—ã –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å...</h1>

        <div class="info-section">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ</h3>
            <div class="info-item">
                <span class="info-label">–í–∞—à IP-–∞–¥—Ä–µ—Å:</span> {client_ip}
            </div>
            <div class="info-item">
                <span class="info-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</span> {current_time.strftime('%Y-%m-%d %H:%M:%S')}
            </div>
            <div class="info-item">
                <span class="info-label">–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å:</span> {requested_url}
            </div>
            <div class="info-item">
                <span class="info-label">–ë—Ä–∞—É–∑–µ—Ä:</span> {user_agent}
            </div>
        </div>

        <div class="image-container">
            <img src="/static/kotik.jpg" alt="–ú–∏–ª—ã–π –∫–æ—Ç–∏–∫">
        </div>
        
        <div class="search-icon">
            ‚ùì
        </div>
        
        <div class="advice">
            <h3>–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?</h3>
            <p>‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã<br>
               ‚Ä¢ –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é<br>
               ‚Ä¢ –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –≤–∏–¥–æ–º —ç—Ç–æ–π –∫—Ä–∞—Å–∏–≤–æ–π –æ—à–∏–±–∫–∏ </p>
        </div>
        
        <a href="/" class="home-button">–í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π</a>

        <div class="journal-section">
            <h3> –ñ—É—Ä–Ω–∞–ª 404 –æ—à–∏–±–æ–∫</h3>
            {journal_html if journal_html else '<div class="log-entry">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ –∂—É—Ä–Ω–∞–ª–µ</div>'}
        </div>

    </div>
</body>
</html>""", 404

from flask import render_template_string

@app.route("/error/500")
def cause_error():
    result = 10 / 0
    return "–≠—Ç–æ—Ç –∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è"

@app.errorhandler(500)
def internal_server_error(err):
    error_message = str(err) if err else "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
    
    return render_template_string("""
<!doctype html>
<html>
<head>
    <title>500 - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 700px;
            margin: 20px;
            backdrop-filter: blur(10px);
        }
        .error-code {
            font-size: 120px;
            font-weight: bold;
            color: #ff6b6b;
            margin: 0;
            text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            margin: 10px 0 20px 0;
            font-size: 2.5em;
        }
        p {
            font-size: 1.2em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 20px;
        }
        .error-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #74b9ff;
            text-align: left;
            font-family: monospace;
            overflow-x: auto;
        }
        .emoji {
            font-size: 80px;
            margin: 20px 0;
            animation: shake 0.5s infinite;
        }
        @keyframes shake {
            0%, 100% {transform: translateX(0);}
            25% {transform: translateX(-5px);}
            75% {transform: translateX(5px);}
        }
        .home-button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            margin: 10px;
        }
        .home-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }
        .support-button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #f19066, #f5cd79);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(241, 144, 102, 0.4);
            margin: 10px;
        }
        .support-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(241, 144, 102, 0.6);
        }
        .advice {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #74b9ff;
        }
        .advice h3 {
            color: #2d3436;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="error-code">500</div>
        <h1>–£–ø—Å! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h1>
        
        <p>–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —É–∂–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.</p>
        
        <div class="error-details">
            <strong>–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:</strong><br>
            {{ error_message }}
        </div>
        
        <div class="advice">
            <h3>–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?</h3>
            <p>‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç<br>
               ‚Ä¢ –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É<br>
               ‚Ä¢ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</p>
        </div>
        
        <div>
            <a href="/" class="home-button">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>
    </div>
</body>
</html>
""", error_message=error_message), 500

count = 0

@app.route("/")
@app.route("/index")
def index():
    return """<!doctype html>
<html>
<head>
    <title>HTTP, –§–ë, –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px 10px 0 0;
            margin: -30px -30px 30px -30px;
        }
        header h1 {
            margin: 0;
            font-size: 2.2em;
        }
        nav {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        nav li {
            margin: 10px 0;
        }
        nav a {
            display: block;
            padding: 12px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s ease;
            font-weight: bold;
        }
        nav a:hover {
            background: #2980b9;
            transform: translateX(5px);
        }
        footer {
            margin-top: 40px;
            padding: 20px;
            background: #34495e;
            color: white;
            text-align: center;
            border-radius: 0 0 10px 10px;
            margin: 30px -30px -30px -30px;
        }
        .lab-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>H–ì–¢–£, –§–ë, WEB-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, —á–∞—Å—Ç—å 2</h1>
            <p>–°–ø–∏—Å–æ–∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç</p>
        </header>

                <nav>
            <ul>
                <li><a href="/lab1">–ü–µ—Ä–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è</a></li>
            </ul>
        </nav>
        
        <footer>
            <p>–§–ë–ò-34, 3 –∫—É—Ä—Å, 2025</p>
        </footer>
    </div>

</body>
</html>"""

@app.route("/lab1")
def lab1():
    return """<!doctype html>
<html>
<head>
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 1</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px 10px 0 0;
            margin: -30px -30px 30px -30px;
        }
        header h1 {
            margin: 0;
            font-size: 2.2em;
        }
        nav {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        nav li {
            margin: 10px 0;
        }
        nav a {
            display: block;
            padding: 12px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s ease;
            font-weight: bold;
        }
        nav a:hover {
            background: #2980b9;
            transform: translateX(5px);
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 15px;
            background: #95a5a6;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        .back-link:hover {
            background: #7f8c8d;
        }
        .content {
            margin: 20px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            line-height: 1.8;
            font-size: 16px;
        }
        .home-link {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 24px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        .home-link:hover {
            background: #2980b9;
        }
        .routes-section {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2c3e50;
        }
        .routes-list {
            list-style-type: none;
            padding: 0;
        }
        .routes-list li {
            margin: 8px 0;
        }
        .routes-list a {
            color: #2c3e50;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .routes-list a:hover {
            background-color: #3498db;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        
        <header>
            <h1>–ü–µ—Ä–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h1>
            <p>–ò–∑—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤ Flask</p>
        </header>
        
        <div class="content">
            <p>Flask ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —è–∑—ã–∫–µ
            –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Python, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            Werkzeug, –∞ —Ç–∞–∫–∂–µ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä Jinja2. –û—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∞–∫
            –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö –º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –∫–∞—Ä–∫–∞—Å–æ–≤
            –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –ª–∏—à—å —Å–∞–º—ã–µ –±–∞-
            –∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.</p>
        </div>
        
        <nav>
            <ul>
                <li><a href="/lab1/web">WEB</a></li>
                <li><a href="/lab1/author">–ê–í–¢–û–†</a></li>
                <li><a href="/lab1/image">–ö–ê–†–¢–ò–ù–ö–ê</a></li>
                <li><a href="/lab1/counter">—Å—á–µ—Ç—á–∏–∫</a></li>
                <li><a href="/lab1/info">–∏–Ω—Ñ–æ</a></li>
                <li><a href="/lab1/clear_counter">–æ—Ç—á–∏—Å—Ç–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞</a></li>
            </ul>
        </nav>
        
        <div class="routes-section">
            <h2>–°–ø–∏—Å–æ–∫ —Ä–æ—É—Ç–æ–≤</h2>
            <ul class="routes-list">
                <li><a href="/">/ (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)</a></li>
                <li><a href="/index">/index (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)</a></li>
                <li><a href="/lab1">/lab1 (–ø–µ—Ä–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è)</a></li>
                <li><a href="/lab1/web">/lab1/web (web-—Å—Ç—Ä–∞–Ω–∏—Ü–∞)</a></li>
                <li><a href="/lab1/author">/lab1/author (–∞–≤—Ç–æ—Ä)</a></li>
                <li><a href="/lab1/image">/lab1/image (–∫–∞—Ä—Ç–∏–Ω–∫–∞)</a></li>
                <li><a href="/lab1/counter">/lab1/counter (—Å—á–µ—Ç—á–∏–∫)</a></li>
                <li><a href="/lab1/info">/lab1/info (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)</a></li>
                <li><a href="/lab1/clear_counter">/lab1/clear_counter (–æ—á–∏—Å—Ç–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞)</a></li>
                <li><a href="/error/400">/error/400 (–æ—à–∏–±–∫–∞ 400)</a></li>
                <li><a href="/error/401">/error/401 (–æ—à–∏–±–∫–∞ 401)</a></li>
                <li><a href="/error/402">/error/402 (–æ—à–∏–±–∫–∞ 402)</a></li>
                <li><a href="/error/403">/error/403 (–æ—à–∏–±–∫–∞ 403)</a></li>
                <li><a href="/error/405">/error/405 (–æ—à–∏–±–∫–∞ 405)</a></li>
                <li><a href="/error/418">/error/418 (–æ—à–∏–±–∫–∞ 418)</a></li>
                <li><a href="/error/500">/error/500 (–æ—à–∏–±–∫–∞ 500)</a></li>
            </ul>
        </div>
        
        <a href="/" class="home-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
    </div>
</body>
</html>"""

@app.route("/error/400")
def error_400():
    return """<!doctype html>
<html>
<head>
    <title>400 Bad Request</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #e74c3c;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #e74c3c;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">400</p>
        <h1>Bad Request</h1>
        <p>–°–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∏–∑-–∑–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.</p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 400

@app.route("/error/401")
def error_401():
    return """<!doctype html>
<html>
<head>
    <title>401 Unauthorized</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #e67e22;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #e67e22;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">401</p>
        <h1>Unauthorized</h1>
        <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–º—É —Ä–µ—Å—É—Ä—Å—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.</p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 401

@app.route("/error/402")
def error_402():
    return """<!doctype html>
<html>
<head>
    <title>402 Payment Required</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #f39c12;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #f39c12;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">402</p>
        <h1>Payment Required</h1>
        <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–ª–∞—Ç–∞.</p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 402

@app.route("/error/403")
def error_403():
    return """<!doctype html>
<html>
<head>
    <title>403 Forbidden</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #d35400;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #d35400;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">403</p>
        <h1>Forbidden</h1>
        <p>–î–æ—Å—Ç—É–ø –∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–º—É —Ä–µ—Å—É—Ä—Å—É –∑–∞–ø—Ä–µ—â–µ–Ω.</p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 403

@app.route("/error/405")
def error_405():
    return """<!doctype html>
<html>
<head>
    <title>405 Method Not Allowed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #c0392b;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #c0392b;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">405</p>
        <h1>Method Not Allowed</h1>
        <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ HTTP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.</p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 405

@app.route("/error/418")
def error_418():
    return """<!doctype html>
<html>
<head>
    <title>418 I'm a teapot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        h1 {
            color: #8e44ad;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .error-code {
            font-size: 6em;
            font-weight: bold;
            color: #8e44ad;
            margin: 0;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        .teapot {
            font-size: 4em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="error-code">418</p>
        <h1>I'm a teapot</h1>
        <div class="teapot">ü´ñ</div>
        <p>–Ø - —á–∞–π–Ω–∏–∫! –°–µ—Ä–≤–µ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–∞—Ä–∏—Ç—å –∫–æ—Ñ–µ –≤ —á–∞–π–Ω–∏–∫–µ.</p>
        <p><em>(–≠—Ç–æ —à—É—Ç–æ—á–Ω—ã–π –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏–∑ RFC 2324)</em></p>
        <a href="/" class="back-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>""", 418

@app.route("/")
@app.route("/lab1/web")
def web():
    return """<!doctype html>
        <html>
           <body>
           <h1>web-—Å–µ—Ä–≤–µ—Ä –Ω–∞ flask</h1>
               <a href="/lab1/author">author</a>
               <br>
               <a href="/lab1/counter">—Å—á–µ—Ç—á–∏–∫</a>
               <br>
               <a href="/lab1/image">–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å CSS</a>
            </body>
        </html>"""

@app.route("/lab1/author")
def author():
    name = "–§–æ–º—á–µ–Ω–∫–æ –†–æ–º–∞–Ω –î–º–∏—Ç—Ä–∏–µ–≤–∏—á"
    group = "–§–ë–ò-34"
    faculty = "–§–ë"

    return """<!doctype html>
        <html>
            <body>
                <p>–°—Ç—É–¥–µ–Ω—Ç: """ + name + """</p>
                <p>–ì—Ä—É–ø–ø–∞: """ + group + """</p>
                <p>–§–∞–∫—É–ª—å—Ç–µ—Ç: """ + faculty + """</p>
                <a href="/web">web</a>
            </body>
        </html>"""

@app.route('/lab1/image')
def image():
    path = url_for("static", filename="oak.jpg")
    css_path = url_for("static", filename="lab1.css")
    
    response = """
    <!doctype html>
        <html>
            <body>
                <h1>–î—É–±</h1>
                <img src=\"""" + path + """\" class="oak-image">
                <br>
                <a href="/" class="back-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            </body>
        </html>"""
    
    from flask import make_response
    resp = make_response(response)
    
    resp.headers['Content-Language'] = 'ru'
    
    resp.headers['X-Custom-Header-1'] = 'My-Custom-Value-1'
    resp.headers['X-Application-Name'] = 'Flask-Lab-Work'
    
    return resp

count = 0

@app.route('/lab1/counter')
def counter():
    global count
    count += 1
    time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    url = request.url
    client_ip = request.remote_addr

    return '''
<!doctype html>
<html>
    <body>
        <h2>–°—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π</h2>
        –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã —Å—é–¥–∞ –∑–∞—Ö–æ–¥–∏–ª–∏: ''' + str(count) + '''
        <hr>
        –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: ''' + time + ''' <br>
        –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∞–¥—Ä–µ—Å: ''' + url + ''' <br>
        –í–∞—à IP-–∞–¥—Ä–µ—Å: ''' + client_ip + ''' <br>
        <br>
        <a href="/lab1/clear_counter"> –û—á–∏—Å—Ç–∏—Ç—å —Å—á–µ—Ç—á–∏–∫</a><br>
        <a href="/lab1/web"> –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
   </body>
</html>
'''

@app.route('/lab1/clear_counter')
def clear_counter():
    global count
    count = 0
    return '''
<!doctype html>
<html>
    <body>
        <h2>–°—á–µ—Ç—á–∏–∫ –æ—á–∏—â–µ–Ω!</h2>
        <p>–°—á–µ—Ç—á–∏–∫ –ø–æ—Å–µ—â–µ–Ω–∏–π –±—ã–ª —Å–±—Ä–æ—à–µ–Ω –≤ –Ω–æ–ª—å.</p>
        <br>
        <a href="/lab1/counter"> –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—á–µ—Ç—á–∏–∫—É</a><br>
        <a href="/lab1/web"> –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
   </body>
</html>
'''

@app.route("/lab1/info")
def info():
    return redirect("/lab1/author")

@app.route("/lab1/created")
def created():
    return '''
<!doctype html>
<html>
    <body>
        <h1>–°–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ</h1>
        <div><i>—á—Ç–æ-—Ç–æ —Å–æ–∑–¥–∞–Ω–æ...</i></div>
    </body>
</html>
''', 201
