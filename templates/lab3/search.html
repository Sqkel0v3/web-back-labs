{% extends "base.html" %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
<h1>Поиск смартфонов</h1>

<div class="search-form">
    <form method="get">
        <div class="form-group">
            <label for="min_price">Минимальная цена:</label>
            <input type="number" id="min_price" name="min_price" 
                   value="{{ min_price }}" 
                   placeholder="от {{ min_all_price }} руб.">
        </div>
        
        <div class="form-group">
            <label for="max_price">Максимальная цена:</label>
            <input type="number" id="max_price" name="max_price" 
                   value="{{ max_price }}" 
                   placeholder="до {{ max_all_price }} руб.">
        </div>
        
        <div class="form-buttons">
            <button type="submit" name="search" value="1">Найти</button>
            <button type="submit" name="reset" value="1">Сброс</button>
        </div>
    </form>
</div>

<div class="results-info">
    {% if filtered_count == total_count %}
        <p>Показаны все товары: <strong>{{ total_count }}</strong> шт.</p>
    {% else %}
        <p>Найдено товаров: <strong>{{ filtered_count }}</strong> из {{ total_count }}</p>
    {% endif %}
</div>

{% if phones %}
<div class="products-grid">
    {% for phone in phones %}
    <div class="product-card">
        <div class="product-name">{{ phone.name }}</div>
        <div class="product-brand">{{ phone.brand }}</div>
        <div class="product-details">
            <span>Цвет: {{ phone.color }}</span>
            <span>Память: {{ phone.storage }}</span>
        </div>
        <div class="product-price">{{ phone.price }} руб.</div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-results">
    <p>Не найдено ни одного товара по заданным критериям</p>
</div>
{% endif %}

<style>
.search-form {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid #dee2e6;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

.form-group input {
    width: 200px;
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 16px;
}

.form-buttons {
    display: flex;
    gap: 10px;
}

.form-buttons button {
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

.form-buttons button[type="submit"]:not([name="reset"]) {
    background: #007bff;
    color: white;
}

.form-buttons button[name="reset"] {
    background: #6c757d;
    color: white;
}

.results-info {
    background: #e9ecef;
    padding: 15px;
    border-radius: 4px;
    margin-bottom: 20px;
    font-size: 18px;
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.product-card {
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 20px;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.product-name {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 5px;
    color: #2c3e50;
}

.product-brand {
    color: #6c757d;
    margin-bottom: 10px;
    font-style: italic;
}

.product-details {
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-bottom: 15px;
    font-size: 14px;
    color: #495057;
}

.product-price {
    font-size: 20px;
    font-weight: bold;
    color: #28a745;
    text-align: right;
}

.no-results {
    text-align: center;
    padding: 40px;
    background: #f8d7da;
    border: 1px solid #f5c6cb;
    border-radius: 8px;
    color: #721c24;
    font-size: 18px;
}
</style>
{% endblock %}